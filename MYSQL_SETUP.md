# MySQL + Node.js åç«¯é…ç½®æŒ‡å—

æœ¬é¡¹ç›®å·²ä» Supabase æ”¹ä¸ºä½¿ç”¨ MySQL + Node.js Express åç«¯ã€‚

## ç¬¬ä¸€æ­¥ï¼šå®‰è£… MySQL

### Windows ç”¨æˆ·

1. ä¸‹è½½ MySQL Installerï¼šhttps://dev.mysql.com/downloads/installer/
2. é€‰æ‹© "MySQL Installer for Windows"
3. å®‰è£…æ—¶é€‰æ‹© "Developer Default"
4. è®¾ç½® root å¯†ç ï¼ˆè®°ä½è¿™ä¸ªå¯†ç ï¼‰
5. å®Œæˆå®‰è£…

### éªŒè¯å®‰è£…

æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥ï¼š
```bash
mysql --version
```

## ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®åº“

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ MySQL Workbenchï¼ˆæ¨èï¼‰

1. æ‰“å¼€ MySQL Workbench
2. è¿æ¥åˆ°æœ¬åœ° MySQL æœåŠ¡å™¨
3. æ‰“å¼€ `database-mysql.sql` æ–‡ä»¶
4. ç‚¹å‡» âš¡ å›¾æ ‡æ‰§è¡Œè„šæœ¬
5. åˆ·æ–°å·¦ä¾§æ•°æ®åº“åˆ—è¡¨ï¼Œåº”è¯¥èƒ½çœ‹åˆ° `student_management` æ•°æ®åº“

### æ–¹å¼äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œ

```bash
# ç™»å½• MySQL
mysql -u root -p

# æ‰§è¡Œ SQL æ–‡ä»¶
source /path/to/database-mysql.sql

# æˆ–è€…ç›´æ¥å¯¼å…¥
mysql -u root -p < database-mysql.sql
```

### éªŒè¯æ•°æ®

æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢éªŒè¯æ•°æ®æ˜¯å¦å¯¼å…¥æˆåŠŸï¼š

```sql
USE student_management;

-- æŸ¥çœ‹æ‰€æœ‰è¡¨
SHOW TABLES;

-- æŸ¥çœ‹ç”¨æˆ·æ•°æ®
SELECT * FROM users;

-- æŸ¥çœ‹å­¦ç”Ÿæ•°æ®
SELECT * FROM students;
```

åº”è¯¥èƒ½çœ‹åˆ°æµ‹è¯•æ•°æ®ï¼š
- 1ä¸ªç®¡ç†å‘˜è´¦å·ï¼šadmin@example.com / 123456
- 2ä¸ªæ•™å¸ˆè´¦å·
- 4ä¸ªå­¦ç”Ÿè´¦å·

## ç¬¬ä¸‰æ­¥ï¼šé…ç½®åç«¯

### 1. å®‰è£…åç«¯ä¾èµ–

```bash
cd student-management-system/server
npm install
```

### 2. é…ç½®æ•°æ®åº“è¿æ¥

ç¼–è¾‘ `server/.env` æ–‡ä»¶ï¼š

```env
# æœåŠ¡å™¨é…ç½®
PORT=3001

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=ä½ çš„MySQLå¯†ç 
DB_NAME=student_management

# JWT é…ç½®
JWT_SECRET=your-secret-key-change-this
JWT_EXPIRES_IN=7d
```

### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run dev

# æˆ–ç”Ÿäº§æ¨¡å¼
npm start
```

çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸš€ æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3001
```

## ç¬¬å››æ­¥ï¼šå¯åŠ¨å‰ç«¯

æ‰“å¼€æ–°çš„å‘½ä»¤è¡Œçª—å£ï¼š

```bash
cd student-management-system
npm run dev
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ `http://localhost:3000`

## ç¬¬äº”æ­¥ï¼šç™»å½•æµ‹è¯•

ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•è´¦å·ç™»å½•ï¼š

### ç®¡ç†å‘˜è´¦å·
- é‚®ç®±ï¼šadmin@example.com
- å¯†ç ï¼š123456

### æ•™å¸ˆè´¦å·
- é‚®ç®±ï¼šteacher1@example.com
- å¯†ç ï¼š123456

### å­¦ç”Ÿè´¦å·
- é‚®ç®±ï¼šzhangsan@example.com
- å¯†ç ï¼š123456

## é¡¹ç›®ç»“æ„

```
student-management-system/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ server/                # åç«¯æºç 
â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.js        # è®¤è¯æ¥å£
â”‚   â”‚   â”œâ”€â”€ students.js    # å­¦ç”Ÿç®¡ç†
â”‚   â”‚   â”œâ”€â”€ courses.js     # è¯¾ç¨‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ scores.js      # æˆç»©ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ attendance.js  # è€ƒå‹¤ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ notifications.js # é€šçŸ¥ç®¡ç†
â”‚   â”‚   â””â”€â”€ dashboard.js   # æ•°æ®ç»Ÿè®¡
â”‚   â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ db.js          # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ auth.js        # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ index.js           # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ .env               # ç¯å¢ƒå˜é‡
â””â”€â”€ database-mysql.sql     # æ•°æ®åº“è„šæœ¬
```

## API æ¥å£è¯´æ˜

### è®¤è¯æ¥å£

- `POST /api/auth/login` - ç™»å½•
- `POST /api/auth/register` - æ³¨å†Œ

### å­¦ç”Ÿç®¡ç†

- `GET /api/students` - è·å–å­¦ç”Ÿåˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œæœç´¢ï¼‰
- `POST /api/students` - æ·»åŠ å­¦ç”Ÿ
- `PUT /api/students/:id` - æ›´æ–°å­¦ç”Ÿ
- `DELETE /api/students/:id` - åˆ é™¤å­¦ç”Ÿ

### è¯¾ç¨‹ç®¡ç†

- `GET /api/courses` - è·å–è¯¾ç¨‹åˆ—è¡¨

### æˆç»©ç®¡ç†

- `GET /api/scores` - è·å–æˆç»©åˆ—è¡¨

### è€ƒå‹¤ç®¡ç†

- `GET /api/attendance` - è·å–è€ƒå‹¤åˆ—è¡¨

### é€šçŸ¥ç®¡ç†

- `GET /api/notifications` - è·å–é€šçŸ¥åˆ—è¡¨

### æ•°æ®ç»Ÿè®¡

- `GET /api/dashboard/stats` - è·å–ç»Ÿè®¡æ•°æ®

## å¸¸è§é—®é¢˜

### Q1: æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`ER_ACCESS_DENIED_ERROR` æˆ– `ECONNREFUSED`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦å¯åŠ¨
2. æ£€æŸ¥ `server/.env` ä¸­çš„æ•°æ®åº“å¯†ç æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤ MySQL ç«¯å£æ˜¯ 3306

### Q2: åç«¯å¯åŠ¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Cannot find module 'express'`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
cd server
npm install
```

### Q3: å‰ç«¯æ— æ³•è¿æ¥åç«¯

**é”™è¯¯ä¿¡æ¯**ï¼š`Network Error` æˆ– `CORS error`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤åç«¯å·²å¯åŠ¨ï¼ˆhttp://localhost:3001ï¼‰
2. æ£€æŸ¥ `.env` ä¸­çš„ `VITE_API_BASE_URL` é…ç½®
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜é‡è¯•

### Q4: ç™»å½•åç«‹å³é€€å‡º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ JWT_SECRET å·²é…ç½®
3. æ¸…é™¤ localStorage é‡æ–°ç™»å½•

### Q5: MySQL Workbench æ— æ³•è¿æ¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ MySQL æœåŠ¡å·²å¯åŠ¨
2. æ£€æŸ¥è¿æ¥å‚æ•°ï¼ˆä¸»æœºã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ï¼‰
3. å°è¯•ä½¿ç”¨å‘½ä»¤è¡Œè¿æ¥æµ‹è¯•

## å¼€å‘å»ºè®®

### 1. ä½¿ç”¨ Postman æµ‹è¯• API

å¯ä»¥å¯¼å…¥ä»¥ä¸‹æµ‹è¯•è¯·æ±‚ï¼š

```json
{
  "name": "ç™»å½•",
  "request": {
    "method": "POST",
    "url": "http://localhost:3001/api/auth/login",
    "body": {
      "email": "admin@example.com",
      "password": "123456"
    }
  }
}
```

### 2. æŸ¥çœ‹åç«¯æ—¥å¿—

åç«¯ä¼šè¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- æ•°æ®åº“è¿æ¥çŠ¶æ€
- API è¯·æ±‚ä¿¡æ¯
- é”™è¯¯å †æ ˆ

### 3. æ•°æ®åº“ç®¡ç†

æ¨èä½¿ç”¨ MySQL Workbench è¿›è¡Œæ•°æ®åº“ç®¡ç†ï¼š
- æŸ¥çœ‹è¡¨ç»“æ„
- æ‰§è¡Œ SQL æŸ¥è¯¢
- å¯¼å…¥å¯¼å‡ºæ•°æ®
- å¤‡ä»½æ•°æ®åº“

## ä¸‹ä¸€æ­¥

- å®Œå–„å…¶ä»– API æ¥å£ï¼ˆè¯¾ç¨‹ã€æˆç»©ã€è€ƒå‹¤çš„å¢åˆ æ”¹ï¼‰
- æ·»åŠ æ•°æ®éªŒè¯
- å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- æ·»åŠ æ—¥å¿—è®°å½•
- éƒ¨ç½²åˆ°æœåŠ¡å™¨

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. MySQL æœåŠ¡æ˜¯å¦è¿è¡Œ
2. åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
3. å‰ç«¯é…ç½®æ˜¯å¦æ­£ç¡®
4. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
